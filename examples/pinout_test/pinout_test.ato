#pragma experiment("FOR_LOOP")
#pragma experiment("BRIDGE_CONNECT")
#pragma experiment("TRAITS")

import ElectricPower
import I2C
import Resistor
import Capacitor

from "espressif-esp32-c3/espressif-esp32-c3-mini.ato" import ESP32_C3_MINI_1
from "atopile/raspberry-rp2040/raspberry-rp2040.ato" import Raspberry_RP2040

module PinoutTest:
    """Simple test module to validate pinout explorer JSON output."""

    # Power rail
    power_3v3 = new ElectricPower
    assert power_3v3.voltage within 3.3V +/- 5%

    # ESP32-C3 WROOM module
    mcu = new ESP32_C3_MINI_1
    power_3v3 ~ mcu.power

    # Raspberry RP2040 module
    rp2040 = new Raspberry_RP2040
    power_3v3 ~ rp2040.power

    # I2C bus with pull-ups
    i2c_bus = new I2C
    i2c_bus ~ mcu.i2c

    pullup_sda = new Resistor
    pullup_sda.resistance = 4.7kohm +/- 5%
    pullup_sda.package = "0402"
    i2c_bus.sda.line ~> pullup_sda ~> power_3v3.hv

    pullup_scl = new Resistor
    pullup_scl.resistance = 4.7kohm +/- 5%
    pullup_scl.package = "0402"
    i2c_bus.scl.line ~> pullup_scl ~> power_3v3.hv
