/* ── Pinout Layout ───────────────────────────────────────────── */

.pinout-layout {
  display: flex;
  height: 100vh;
  overflow: hidden;
  background: var(--vscode-editor-background, #1e1e1e);
  color: var(--vscode-editor-foreground, #d4d4d4);
  font-family: var(--vscode-font-family, system-ui, sans-serif);
  font-size: 13px;
}

/* ── Side Panel ──────────────────────────────────────────────── */

.pinout-panel {
  width: 220px;
  background: var(--vscode-sideBar-background, #252526);
  border-right: 1px solid var(--vscode-panel-border, #333);
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  overflow: hidden;
  transition: width 0.2s ease;
}

.pinout-panel.collapsed {
  width: 0;
  border-right: none;
}

.pinout-panel-header {
  padding: 10px 12px 6px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--vscode-descriptionForeground, #888);
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-shrink: 0;
}

.pinout-panel-close {
  background: none;
  border: none;
  color: var(--vscode-descriptionForeground, #888);
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
  padding: 0 2px;
  opacity: 0.6;
}
.pinout-panel-close:hover { opacity: 1; }

.pinout-panel-search {
  padding: 0 8px 8px;
  flex-shrink: 0;
}
.pinout-panel-search input {
  width: 100%;
  padding: 4px 8px;
  border: 1px solid var(--vscode-panel-border, #333);
  border-radius: 3px;
  background: var(--vscode-editor-background, #1e1e1e);
  color: var(--vscode-editor-foreground, #d4d4d4);
  font-size: 12px;
  font-family: inherit;
  outline: none;
}
.pinout-panel-search input:focus {
  border-color: var(--vscode-textLink-foreground, #4fc1ff);
}

/* Component list */
.pinout-comp-list {
  flex: 1;
  overflow-y: auto;
  padding: 0 4px;
}

.pinout-comp-item {
  display: flex;
  align-items: center;
  gap: 6px;
  width: 100%;
  padding: 5px 8px;
  border: none;
  border-radius: 3px;
  background: none;
  color: var(--vscode-editor-foreground, #d4d4d4);
  font-size: 12px;
  font-family: inherit;
  text-align: left;
  cursor: pointer;
  transition: background 0.1s;
}
.pinout-comp-item:hover {
  background: var(--vscode-list-hoverBackground, #2a2d2e);
}
.pinout-comp-item.active {
  background: var(--vscode-list-activeSelectionBackground, #094771);
  color: var(--vscode-list-activeSelectionForeground, #fff);
}

.pinout-comp-des {
  font-family: var(--vscode-editor-font-family, monospace);
  color: var(--vscode-textLink-foreground, #4fc1ff);
  font-size: 11px;
  min-width: 24px;
  flex-shrink: 0;
}
.pinout-comp-item.active .pinout-comp-des { color: inherit; }

.pinout-comp-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.pinout-comp-cnt {
  font-size: 10px;
  color: var(--vscode-descriptionForeground, #888);
  flex-shrink: 0;
}

/* Active Buses */
.pinout-buses {
  flex-shrink: 0;
  overflow-y: auto;
}
.pinout-panel-divider {
  height: 1px;
  background: var(--vscode-panel-border, #333);
  margin: 4px 8px;
}
.pinout-buses-title {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--vscode-descriptionForeground, #888);
  padding: 6px 12px 4px;
}
.pinout-buses-list {
  padding: 0 4px 8px;
}
.pinout-bus-item {
  display: flex;
  align-items: center;
  gap: 6px;
  width: 100%;
  padding: 4px 8px;
  border: none;
  border-radius: 3px;
  background: none;
  color: var(--vscode-editor-foreground, #d4d4d4);
  font-size: 12px;
  font-family: inherit;
  text-align: left;
  cursor: pointer;
  transition: background 0.1s;
}
.pinout-bus-item:hover {
  background: var(--vscode-list-hoverBackground, #2a2d2e);
}
.pinout-bus-item.active {
  background: var(--vscode-list-activeSelectionBackground, #094771);
  color: var(--vscode-list-activeSelectionForeground, #fff);
}
.pinout-bus-swatch {
  width: 8px;
  height: 8px;
  border-radius: 2px;
  flex-shrink: 0;
}
.pinout-bus-name {
  font-family: var(--vscode-editor-font-family, monospace);
  font-size: 11px;
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.pinout-bus-type {
  font-size: 9px;
  color: var(--vscode-descriptionForeground, #888);
  flex-shrink: 0;
}
.pinout-bus-item.active .pinout-bus-type { color: inherit; opacity: 0.7; }
.pinout-bus-cnt {
  font-size: 9px;
  color: var(--vscode-descriptionForeground, #666);
  min-width: 12px;
  text-align: right;
  flex-shrink: 0;
}
.pinout-bus-item.active .pinout-bus-cnt { color: inherit; opacity: 0.7; }

/* ── Main Canvas ─────────────────────────────────────────────── */

.pinout-canvas {
  flex: 1;
  position: relative;
  overflow: auto;
  display: flex;
  align-items: center;
  justify-content: center;
}

.pinout-menu-btn {
  position: absolute;
  top: 8px;
  left: 8px;
  z-index: 10;
  width: 28px;
  height: 28px;
  border: 1px solid var(--vscode-panel-border, #333);
  border-radius: 4px;
  background: var(--vscode-sideBar-background, #252526);
  color: var(--vscode-descriptionForeground, #888);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
}
.pinout-menu-btn:hover {
  color: var(--vscode-editor-foreground, #d4d4d4);
}

/* Zoom controls */
.pinout-zoom-controls {
  position: absolute;
  bottom: 12px;
  right: 12px;
  z-index: 10;
  display: flex;
  gap: 2px;
  background: var(--vscode-sideBar-background, #252526);
  border: 1px solid var(--vscode-panel-border, #333);
  border-radius: 5px;
  overflow: hidden;
}
.pinout-zoom-controls button {
  width: 28px;
  height: 28px;
  border: none;
  background: none;
  color: var(--vscode-editor-foreground, #d4d4d4);
  cursor: pointer;
  font-size: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.pinout-zoom-controls button:hover {
  background: var(--vscode-list-hoverBackground, #2a2d2e);
}
.pinout-zoom-controls button + button {
  border-left: 1px solid var(--vscode-panel-border, #333);
}

/* ── Chip Diagram ────────────────────────────────────────────── */

.pinout-diagram-wrap {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

/* (header removed - info is on the chip body and side panel) */

.pinout-diagram-scroll {
  overflow: auto;
  max-width: 100%;
  max-height: calc(100vh - 60px);
}

.pinout-diagram {
  position: relative;
}

/* Chip body */
.pinout-chip-body {
  position: absolute;
  background: #3c3c3c;
  border: 2px solid #666;
  border-radius: 6px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  pointer-events: none;
}
.pinout-chip-dot {
  position: absolute;
  top: 6px;
  left: 6px;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--vscode-descriptionForeground, #888);
}
.pinout-chip-label {
  font-family: var(--vscode-editor-font-family, monospace);
  font-size: 12px;
  color: var(--vscode-descriptionForeground, #888);
  text-align: center;
  max-width: 90%;
  overflow: hidden;
  text-overflow: ellipsis;
}
.pinout-chip-sublabel {
  font-family: var(--vscode-editor-font-family, monospace);
  font-size: 9px;
  color: var(--vscode-descriptionForeground, #666);
  text-align: center;
  max-width: 90%;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ── Pin unit — unified tag component ──────────────── */
.pinout-pin-unit {
  z-index: 2;
  transition: opacity 0.15s, background 0.1s;
  background: rgba(255,255,255,0.04);
  border-radius: 3px;
  overflow: hidden;
  gap: 0;
}
.pinout-pin-unit:hover {
  background: rgba(255,255,255,0.08);
}
.pinout-pin-unit.faded {
  opacity: 0.15;
}
.pinout-pin-unit.selected {
  background: rgba(255,255,255,0.1);
  box-shadow: 0 0 0 1px var(--accent, #f95015);
}
.pinout-pin-unit.nc {
  background: transparent;
}

/* Color accent bar — the bus-color stripe on the chip-body side */
.pinout-pin-accent {
  width: 3px;
  align-self: stretch;
  flex-shrink: 0;
  border-radius: 1px;
}

/* Pin number — compact, between accent and label */
.pinout-pin-num {
  font-family: var(--font-mono, monospace);
  font-size: 8px;
  font-weight: 600;
  color: var(--text-muted, #7f849c);
  padding: 0 3px;
  min-width: 16px;
  text-align: center;
  flex-shrink: 0;
  line-height: 1;
}

/* Function/name label — the main text */
.pinout-pin-label {
  font-family: var(--font-mono, monospace);
  font-size: 8.5px;
  font-weight: 500;
  color: var(--text-primary, #cdd6f4);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 4px;
  line-height: 1;
  /* Fixed width for uniform sizing */
  width: 110px;
  min-width: 110px;
  max-width: 110px;
}
/* Left side: label is first, right-aligned */
.pinout-pin-unit[style*="row-reverse"] .pinout-pin-label {
  text-align: right;
  padding-right: 0;
  padding-left: 4px;
}
/* NC pins — dimmer */
.pinout-pin-unit.nc .pinout-pin-label {
  color: var(--text-muted, #7f849c);
}
.pinout-pin-unit.nc .pinout-pin-num {
  color: var(--text-muted, #585b70);
}

/* ── Detail Popup ────────────────────────────────────────────── */

.pinout-detail {
  position: fixed;
  z-index: 100;
  background: var(--vscode-sideBar-background, #252526);
  border: 1px solid var(--vscode-panel-border, #333);
  border-radius: 6px;
  padding: 10px 12px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
  min-width: 200px;
  max-width: 320px;
  font-size: 12px;
}

.pinout-detail-close {
  position: absolute;
  top: 4px;
  right: 8px;
  background: none;
  border: none;
  color: var(--vscode-descriptionForeground, #888);
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
}
.pinout-detail-close:hover { color: var(--vscode-editor-foreground, #d4d4d4); }

.pinout-detail-header {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 6px;
}
.pinout-detail-num {
  font-family: var(--vscode-editor-font-family, monospace);
  font-weight: 600;
  font-size: 13px;
}
.pinout-detail-name {
  font-family: var(--vscode-editor-font-family, monospace);
  color: var(--vscode-textLink-foreground, #4fc1ff);
}
.pinout-detail-type {
  font-size: 10px;
  padding: 1px 5px;
  border-radius: 2px;
  color: #fff;
}

.pinout-detail-section {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: var(--vscode-descriptionForeground, #888);
  margin: 6px 0 3px;
}

.pinout-detail-fn {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 2px 0;
  font-size: 11px;
}
.pinout-detail-dot {
  width: 6px;
  height: 6px;
  border-radius: 2px;
  flex-shrink: 0;
}
.pinout-detail-fn-name {
  font-family: var(--vscode-editor-font-family, monospace);
}
.pinout-detail-fn-type {
  margin-left: auto;
  font-size: 10px;
  color: var(--vscode-descriptionForeground, #888);
}

.pinout-detail-meta {
  margin-top: 6px;
  font-size: 10px;
  color: var(--vscode-descriptionForeground, #888);
}
