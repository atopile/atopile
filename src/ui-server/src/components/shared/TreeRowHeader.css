/* ==========================================
   TreeRowHeader.css
   SINGLE SOURCE OF TRUTH for all expandable tree row styling.
   Used by: StandardLibraryPanel, VariablesPanel, StructurePanel (ModuleTreeNode)

   All tree panels MUST use these classes for consistent rendering.
   ========================================== */

/* ===================
   Base Row Container
   =================== */
.tree-row-header {
  display: flex;
  align-items: center;
  gap: 4px;
  /* VS Code native tree item height */
  height: var(--row-height-tree-item);
  min-height: var(--row-height-tree-item);
  padding: 0 var(--spacing-sm);
  border-radius: 0;
  cursor: pointer;
  transition: background 0.1s ease;
  /* Font settings - match VS Code */
  font-family: var(--vscode-font-family, var(--font-sans));
  font-size: var(--vscode-font-size, 13px);
  font-weight: 400;
  text-transform: none;
  letter-spacing: 0;
}

.tree-row-header:hover {
  background: var(--vscode-list-hoverBackground, rgba(255, 255, 255, 0.04));
}

/* Expanded state - subtle background */
.tree-row-header.expanded {
  /* No background change - let hover handle it */
}

/* Non-expandable rows */
.tree-row-header:not(.expandable) {
  cursor: default;
}

/* Focus state for keyboard navigation */
.tree-row-header:focus {
  outline: none;
  background: var(--vscode-list-hoverBackground, rgba(255, 255, 255, 0.04));
  box-shadow: inset 0 0 0 1px var(--ctp-blue);
}

.tree-row-header:focus-visible {
  outline: none;
  box-shadow: inset 0 0 0 1px var(--ctp-blue);
}

/* ===================
   Chevron (expand/collapse)
   =================== */
.tree-row-chevron {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  color: var(--vscode-foreground, var(--text-primary));
}

.tree-row-chevron-spacer {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

/* ===================
   Type Icon
   =================== */
.tree-row-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

/* ===================
   Primary Label
   =================== */
.tree-row-label {
  font-weight: 400;
  color: var(--vscode-foreground, var(--text-primary));
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Truncated indicator - dotted underline on hover */
.tree-row-label.truncated {
  cursor: help;
}

.tree-row-label.truncated:hover {
  text-decoration: underline dotted;
  text-decoration-color: var(--text-muted);
  text-underline-offset: 2px;
}

/* ===================
   Secondary Label (inline with colon prefix)
   Used for type annotations that appear right after the name
   e.g., "myModule: Module"
   =================== */
.tree-row-secondary {
  color: var(--vscode-descriptionForeground, var(--text-muted));
  margin-left: 2px;
  opacity: 0.7;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.tree-row-secondary::before {
  content: ": ";
}

/* ===================
   Right-Aligned Value
   Used for type annotations at the end of the row
   e.g., spec values in Structure panel
   =================== */
.tree-row-right-value {
  margin-left: auto;
  color: var(--vscode-descriptionForeground, var(--text-muted));
  font-size: var(--vscode-font-size, 13px);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  opacity: 0.7;
}

/* Unconstrained parameter styling */
.tree-row-right-value.unconstrained {
  opacity: 0.4;
  font-style: italic;
}

/* Truncated right value */
.tree-row-right-value.truncated {
  cursor: help;
}

.tree-row-right-value.truncated:hover {
  text-decoration: underline dotted;
  text-decoration-color: var(--text-muted);
  text-underline-offset: 2px;
}

/* ===================
   Count Badge
   =================== */
.tree-row-count {
  margin-left: auto;
  font-size: var(--font-size-xs);
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 0 6px;
  border-radius: var(--radius-sm);
  flex-shrink: 0;
}

/* When there's a right value, count badge should not auto-margin */
.tree-row-header:has(.tree-row-right-value) .tree-row-count {
  margin-left: var(--spacing-sm);
}

/* ===================
   Group Header Variant
   For top-level type groups (Interfaces, Modules, etc.)
   =================== */
.tree-row-header.tree-group-header {
  /* Same base styling, but count badge has parentheses */
}

.tree-row-header.tree-group-header .tree-row-count {
  background: none;
  padding: 0;
}

.tree-row-header.tree-group-header .tree-row-count::before {
  content: "(";
}

.tree-row-header.tree-group-header .tree-row-count::after {
  content: ")";
}

/* ===================
   Tree Structure Classes
   For nested tree containers
   =================== */
.tree-row-children {
  /* Container for nested children */
}

.tree-row-node {
  /* Container for a single node and its children */
}

/* ===================
   Connecting Lines (optional visual)
   Applied to tree-row-children containers
   =================== */
.tree-row-children.show-lines {
  position: relative;
}

.tree-row-children.show-lines::before {
  content: '';
  position: absolute;
  left: 8px;
  top: 0;
  bottom: 8px;
  width: 1px;
  background: var(--border-subtle);
  opacity: 0.5;
}
